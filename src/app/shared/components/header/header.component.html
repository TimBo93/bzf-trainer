<header
  class="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"
>
  <div class="container mx-auto flex h-14 items-center px-4">
    <!-- Logo -->
    <a routerLink="/" class="flex items-center gap-2 font-semibold text-lg">
      <lucide-icon [img]="Plane" class="h-6 w-6 text-primary"></lucide-icon>
      <span class="hidden sm:inline">BZF Trainer</span>
    </a>

    <!-- Search -->
    <div class="flex-1 flex justify-center px-4">
      <app-search></app-search>
    </div>

    <!-- Navigation -->
    <nav class="flex items-center gap-1 sm:gap-2">
      <a
        routerLink="/"
        class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
      >
        <lucide-icon [img]="Home" class="h-5 w-5"></lucide-icon>
        <span class="sr-only">{{ 'header.home' | translate }}</span>
      </a>

      <a
        routerLink="/statistics"
        class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
      >
        <lucide-icon [img]="BarChart3" class="h-5 w-5"></lucide-icon>
        <span class="sr-only">{{ 'header.statistics' | translate }}</span>
      </a>

      <a
        routerLink="/settings"
        class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
      >
        <lucide-icon [img]="Settings" class="h-5 w-5"></lucide-icon>
        <span class="sr-only">{{ 'header.settings' | translate }}</span>
      </a>

      <!-- Language Dropdown -->
      <div class="relative">
        <button
          (click)="toggleLanguageDropdown()"
          class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring gap-1"
        >
          <lucide-icon [img]="Globe" class="h-5 w-5"></lucide-icon>
          <span class="text-xs font-semibold">{{ getCurrentLanguageLabel() }}</span>
        </button>
        @if (showLanguageDropdown()) {
        <div
          class="absolute right-0 top-full mt-1 bg-card border rounded-lg shadow-lg py-1 min-w-[120px] z-50"
          (mouseleave)="closeLanguageDropdown()"
        >
          <button
            (click)="setLanguage('de')"
            class="w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors flex items-center gap-2"
            [class.bg-accent]="translationService.language() === 'de'"
          >
            ðŸ‡©ðŸ‡ª Deutsch
          </button>
          <button
            (click)="setLanguage('en')"
            class="w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors flex items-center gap-2"
            [class.bg-accent]="translationService.language() === 'en'"
          >
            ðŸ‡¬ðŸ‡§ English
          </button>
        </div>
        }
      </div>

      <!-- Theme Toggle -->
      <button
        (click)="toggleTheme()"
        class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
      >
        @if (settingsService.isDark()) {
        <lucide-icon [img]="Sun" class="h-5 w-5"></lucide-icon>
        } @else {
        <lucide-icon [img]="Moon" class="h-5 w-5"></lucide-icon>
        }
        <span class="sr-only">{{ 'header.theme' | translate }}</span>
      </button>

      <!-- About Button -->
      <button
        (click)="openAbout()"
        class="inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
      >
        <lucide-icon [img]="Info" class="h-5 w-5"></lucide-icon>
        <span class="sr-only">{{ 'header.about' | translate }}</span>
      </button>
    </nav>
  </div>
</header>

<!-- About Dialog -->
@if (showAboutDialog()) {
<app-disclaimer [aboutMode]="true" (accepted)="closeAbout()" (closed)="closeAbout()" />
}
